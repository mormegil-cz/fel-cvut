<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
 "http://www.w3.org/TR/REC-html40/loose.dtd">

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
  <meta name="author" content="Petr Kadlec">
  
  <title>Stavebnice komplexních 3D scén</title>

  <link rel=StyleSheet href="gm.css" type="text/css" title="Stylesheet">  
</head>
<body lang=cz>
<h1>Stavebnice komplexních 3D scén</h1>
<p class=author><a href="mailto:kadlecp2@fel.cvut.cz">Petr Kadlec</a>

<h2>Úvod</h2>
<p>Tato semestrální práce z&nbsp;pøedmìtu GM má za úkol zjednodušit práci pøi generování
testovacích scén. Jako vstup má knihovnu hotovıch 3D místností (ve formátu VRML/X3D,
spolu s&nbsp;popisem ve formátu XML), plus poadavky na vıslednou scénu (ve formátu XML).
Vıstupem je VRML/X3D soubor s&nbsp;vygenerovanou scénou, která obsahuje místnosti z&nbsp;dodané
knihovny, rozmístìné podle danıch poadavkù. 
<p>Algoritmus provádí veškerou èinnost v&nbsp;hypotetické ètvereèkové síti. Souèástí
popisu kadé místnosti je informace o&nbsp;pùdorysu místnosti (opìt ve stejné ètvereèkové síti).
Dále je u&nbsp;kadé místnosti seznam tzv. portálù (oken, dveøí, pøípadnì schodù), které
daná místnost obsahuje. Také je zde mono zadat omezení na vzájemné vztahy místností
ve scénì.
<p>Poadavky na vıslednou scénu obsahují seznam místností (resp. skupin místností),
které chceme ve vısledné scénì, spolu s&nbsp;nìkterımi omezeními, které na nì klademe. 

<h2>Formáty vstupních dat</h2>
<p>Všechna vstupní data jsou ve formátu XML. Jejich popis si mùete prohlédnout
zde: <a href="libxml.htm">knihovna místností</a>, <a href="scenexml.htm">poadavky
na scénu</a>.

<h2>Program</h2>
<p>Program je øešen v&nbsp;jazyce Java. Všechny tøídy jsou umístìny v&nbsp;balíèku
<code class=package>cz.cvut.felk.cs.gm.sceneautobuilder</code>. Program pouívá
pro parsování XML souborù knihovnu <a href="http://xml.apache.org/">Xerces</a>,
pro práci s&nbsp;VRML/X3D soubory knihovnu CyberVRML97. Více o&nbsp;programu
viz <a href="zprava.htm">zpráva o&nbsp;øešení</a>.

<h2>Algoritmy&nbsp;a&nbsp;postupy</h2>
<p>Základním algoritmem je DFS (tzn. program provádí úplné prohledání stavového prostoru).
Program postupnì bere dosud neobsazená políèka ve scénì a snaí se na nì umístit
nìkterou místnost. Pokud ji nezbıvá ádné neobsazené políèko, program získal nìjaké
øešení. Pokud má toto øešení lepší ohodnocení, ne dosud nalezené nejlepší,
je uloeno. Pokud má øešení ohodnocení lepší, ne je jistá nastavená mez, prohledávání
je ukonèeno, nebo se pøedpokládá, e toto øešení je ji dostateènì kvalitní.
Z&nbsp;principu øešení vyplıvá, e program za øešení <em>nepovauje</em>, kdy umístí
všechny dodané místnosti, ale ve scénì zbıvají prázdná políèka, nebo jinımi slovy,
program <em>nikdy</em> neponechá ve vytvoøené scénì prázdné místo. Kvùli tomu je
nìkdy nutno dodat &bdquo;vyplòovací&ldquo; místnosti (obvykle místnost 1x1 se
zápornım ohodnocením), které program pouije tehdy, kdy potøebuje vyplnit
&bdquo;díru&ldquo; ve scénì.

<h2>Download</h2>
<p>Ke staení: <a href="dist/sceneautobuilder.zip">Celı balík</a> (287&nbsp;KB ZIP),
nebo jenom: <a href="dist/sceneautobuilder.jar">tøídy programu</a> (39&nbsp;KB JAR),
<a href="dist/source.zip">zdrojovı kód</a> (24&nbsp;KB ZIP).
<p><b>Poznámka:</b> Pokud jste ji stáhli programovı balík, rozbalili ho a nyní ètete
tuto dokumentaci lokálnì, ádnı z&nbsp;odkazù do adresáøe <code class=filename>dist</code>
pøirozenì nefunguje. Všechny pøíslušné soubory toti u máte.
<p>Jako doplòkovı nástroj je mono stáhnout si <a href="dist/roomedit.zip">Room Editor</a> (276&nbsp;KB ZIP),
co je pomùcka, kterou jsem pouíval pøi tvorbì testovacích místností. V&nbsp;balíèku
je Win32 spustitelnı soubor, spolu se zdrojovımi soubory pro Delphi6. (Poznámka: Tento
nástroj není souèástí hlavního distribuèního balíku a není nijak dokumentován èi podporován&hellip;)

<h2>Uivatelská pøíruèka</h2>
<p>Pokud chcete pouít tento program, musíte provést následující kroky:
<ol>
  <li><a href="knihovna.htm">Vytvoøit knihovnu místností</a></li>
  <li><a href="scena.htm">Vytvoøit popis scény</a></li>
  <li><a href="spusteni.htm">Spustit program</a></li>
</ol>

<h2>Rady, tipy, triky</h2>
<p>Program je sice schopen najít øešení pro kadé zadání, které øešení má, ovšem
vzhledem k&nbsp;tomu, e tato úloha je NP-úplná, nemusíte se øešení doèkat. Proto
je vhodné myslet na omezení programu ji pøi tvorbì poadavkù na scénu. Program
postupnì zaplòuje scénu dodanımi místnostmi, pøièem místnosti pouívá v&nbsp;tom
poøadí, v jakém jsou uvedeny v&nbsp;souboru s&nbsp;popisem scény. Proto je vhodné
uvádìt &bdquo;nejuniverzálnìjší&ldquo; místnosti a nakonec, nebo pokud
uvedete vyplòovací místnost 1&times;1 jako první (by se zápornım ohodnocením),
program zaène tím, e touto místností vyplní celou scénu, naèe zaène od konce
zkoušet i&nbsp;jiné varianty. Vısledkem je, e se s&nbsp;nejvìtší pravdìpodobností
nedoèkáte ádného rozumného øešení.
<p>Jako vhodné urychlení je mono zváit neuvedení vıplòovıch místností, teprve
kdy program oznámí, e neexistuje ádné øešení, je mono povolit jejich pouití
(opakuji, na konci seznamu), dát jim záporné ohodnocení a nastavit oøezávací skóre
(<a href="scenexml.htm#trashscore" class=attr>trashscore</a>) na vhodnou
hodnotu tak, aby se nezkoušela hledat øešení, která obsahují mnoho vıplòovıch místností.

<!--
<hr>
<a href="http://validator.w3.org/referer"><img src="img/html40.png" alt="Valid HTML4.0!"></a>
-->

</body>
</html>